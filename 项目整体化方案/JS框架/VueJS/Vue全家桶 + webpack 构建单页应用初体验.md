# æ–‡ç« æŒ‡å—

### ä¸»é¢˜
&emsp; æ‰¿æ¥è¿™ä¸Šä¸€ç¯‡[Vue + Webpack æ„å»ºæ¨¡å—åŒ–å¼€å‘æ¡†æ¶è¯¦è§£](https://blog.csdn.net/AngelLover2017/article/details/85052389)ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨webpackå¯¹vueè¿›è¡Œæ‰“åŒ…ï¼Œä»è€Œå¼€å§‹æˆ‘ä»¬çš„å‰ç«¯æ¨¡å—åŒ–å¼€å‘ä¹‹è·¯ï¼Œè¿™ä¸€ç¯‡åœ¨ä¸Šä¸€ç¯‡çš„åŸºç¡€ä¸Šè®²è§£ `Vueå…¨å®¶æ¡¶(vue+vuex+vue-router+axios)` + `webpack` æ„å»ºä¸€ä¸ªå•é¡µåº”ç”¨Demo 
### å‰æ
&emsp; é˜…è¯»æœ¬ç¯‡å†…å®¹ä¹‹å‰ï¼Œé™¤äº†éœ€è¦æŒæ¡ä¸Šä¸€ç¯‡å†…å®¹ä¸­çš„å‰æéƒ¨åˆ†çš„çŸ¥è¯†ï¼Œè¿˜éœ€è¦äº†è§£ä»¥ä¸‹å†…å®¹ğŸ‘‡
- Vueå…¨å®¶æ¡¶ç³»åˆ—ï¼ŒæŒæ¡vuexï¼Œvue-routerä»¥åŠaxios ï¼Œä¸äº†è§£è¯·ç§»æ­¥å®˜æ–¹æ•™ç¨‹[axios-npm](https://www.npmjs.com/package/axios)ï¼Œ[vuex](https://vuex.vuejs.org/zh/guide/actions.html)ï¼Œ[vue-router](https://router.vuejs.org/zh/guide/)

> <b>vueå…¨å®¶æ¡¶ç®€å•ä»‹ç»</b>
> <code>vuex</code> : vuexæ˜¯ä¸€ç§é›†ä¸­å¼çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬åœ¨æ¨¡å—åŒ–å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»¥ç»„ä»¶æ¥ä½œä¸ºæ¨¡å—å•ä½ï¼Œæ¨¡å—ä¹‹é—´å­˜åœ¨äºä¸åŒçš„å‘½åç©ºé—´ï¼Œä½œç”¨åŸŸäº’ä¸å¹²é¢„ï¼Œè¿™æ ·ä¿è¯äº†æˆ‘ä»¬æ¨¡å—ä¹‹é—´å˜é‡å‡½æ•°åç§°ç­‰ä¸ä¼šå†²çªï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬æˆ‘ä»¬éœ€è¦ç»„ä»¶ä¹‹é—´å…±äº«ä¸€äº›æ•°æ®æˆ–è€…çŠ¶æ€ï¼Œæˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯ä¼ å‚ï¼Œä½†æ˜¯ä¼ å‚çš„åšæ³•è‡³å°‘æœ‰ä¸¤ä¸ªå¼Šç«¯ï¼Œä¸€æ˜¯éº»çƒ¦(å°¤å…¶æ˜¯å½“éœ€è¦ä¼ é€’çš„å‚æ•°å¾ˆå¤šæ—¶)ï¼ŒäºŒæ˜¯ä¸å¥½ç®¡ç†ä¸”å†—ä½™(ç»™å¤šä¸ªç»„ä»¶ä¼ å‚å°±éœ€è¦å¤šä»½å‚æ•°åˆ—è¡¨ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™)ã€‚vuexæä¾›çš„é›†ä¸­å¼ç®¡ç†å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡æŠŠè¦å…±äº«çš„æ•°æ®æˆ–çŠ¶æ€é›†ä¸­èµ·æ¥ç®¡ç†ï¼Œåˆ«çš„ç»„ä»¶éœ€è¦æ—¶å°±å»è®¿é—®å˜æ›´ï¼Œå¤§å¤§æé«˜äº†å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡
>
> <code>vue-router</code> : vue-routeræ˜¯ä¸€ä¸ªå‰ç«¯è·¯ç”±ç®¡ç†å™¨ï¼Œè¿™ä¸ªå’Œåç«¯å¸¸å¬è¯´çš„è·¯ç”±æœ‰äº›ä¸åŒ(ä¸ªäººè§‰å¾—)ï¼Œè¿™é‡Œçš„è·¯ç”±ç®¡ç†å™¨æ›´åƒæ˜¯ä¸€ä¸ªç»„ä»¶æ³¨å†Œå™¨ï¼Œvue-routerä¸ºåˆ†æ•£çš„ç»„ä»¶æ³¨å†Œä¸€ä¸ªè·¯ç”±æˆ–è€…å«åœ°å€ä¹Ÿæœªå°ä¸å¯ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶ç»„ä»¶çš„å±‚çº§åµŒå¥—å…³ç³»ä»¥åŠéšè—è¿˜æ˜¯æ˜¾ç¤ºï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿é«˜æ•ˆçš„æ„å»ºå•é¡µåº”ç”¨
>
> <code>axios</code> : axios å’Œ jquery.ajax/vue-resourceä¸€æ · ï¼Œ éƒ½æ˜¯HTTPå¼‚æ­¥è¯·æ±‚çš„å·¥å…·ï¼Œaxioså’Œvue-resourceçš„APIå¾ˆåƒï¼Œä½†æ˜¯ä¸ªäººè§‰å¾—ï¼Œaxiosçš„APIæ›´ä¸°å¯Œä¸€äº›

# æ­£æ–‡
<hr>
&emsp;æœ¬æ–‡çš„å°Demoå¤§æ¦‚åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªç™»é™†çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿™é‡Œapp.vueå°è£…äº†ä¸€ä¸ªç™»é™†ç»„ä»¶ï¼Œsuccess.vueå°è£…äº†ä¸€ä¸ªæç¤ºé¢æ¿ï¼Œé€šè¿‡vuexæ¥é›†ä¸­ç®¡ç†ç™»é™†çŠ¶æ€ï¼Œç”¨vue-routeræ¥è·¯ç”±æç¤ºé¢æ¿ï¼Œç”¨axiosæ¥å¼‚æ­¥æäº¤åˆ°ä¸€ä¸ªè·¨åŸŸçš„æœåŠ¡å™¨(è¿™é‡Œåå°æœåŠ¡æ˜¯nginx+phpæä¾›ï¼Œæ‰€ä»¥åœ¨dev-serverä¸­è¦è®¾ç½®ä¸€ä¸ªåå‘ä»£ç†ï¼Œä¹Ÿå°±æ˜¯nginxæ¥ä»£ç†æˆ‘ä»¬çš„dev-serverçš„è¯·æ±‚ä»è€Œè§£å†³axiosè·¨åŸŸé—®é¢˜)
<hr>

### å…ˆæ¥çœ‹çœ‹æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ [è‡ªå®šä¹‰çš„]

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20181220122147711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0FuZ2VsTG92ZXIyMDE3,size_16,color_FFFFFF,t_70)
è¿™é‡Œçš„ç›®å½•è®¾ç½®ï¼Œå¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„é‡‘ç§‘ç‰å¾‹ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯æœ€å¥½çš„ï¼Œè¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ³æ³•è®¾å®šæ–‡ä»¶ç»“æ„ï¼Œäº†è§£å¦‚ä½•é…ç½®å•å…¥å£å•å‡ºå£çš„webpack.config.jsï¼Œå¯ä»¥çœ‹æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« (å¼€å¤´æåˆ°äº†)ï¼Œæˆ–è€…ç§»æ­¥webpackå®˜æ–¹ç½‘ç«™ã€‚æœ¬ç¯‡å†…å®¹ï¼Œä¸å†è®²è§£è¿‡å¤šwebpacké…ç½®ï¼Œå’Œä¸Šä¸€ç¯‡æ˜¯åŸºæœ¬ç›¸åŒçš„ï¼Œä¸‹é¢ä¸»è¦è®²è§£ Vueå…¨å®¶æ¡¶ç›¸å…³å†…å®¹

### index.js
```javascript
import Vue from 'vue';
import Router from './routers/index-router';
import Store from './stores/index-store';
import App from './components/App.vue';

var app = new Vue({     //åˆ›å»ºä¸€ä¸ªVueå®ä¾‹
	router : Router,   //åŠ å…¥è·¯ç”±é…ç½®
	store : Store,     //åŠ å…¥çŠ¶æ€ç®¡ç†
	components : {App} //åŠ å…¥Appç»„ä»¶
}).$mount('#app');     //æŒ‚è½½èŠ‚ç‚¹

```
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè·¯ç”±å’ŒçŠ¶æ€éƒ½éœ€è¦åŠ å…¥ä¸€ä¸ªvueå®ä¾‹ä¸­å»æ‰æœ‰æ„ä¹‰ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹å¾ˆæœ‰æ„æ€ï¼Œå°±æ˜¯åœ¨è·¯ç”±routerä¸­æ³¨å†Œçš„ç»„ä»¶(success.vue)ä¾ç„¶å¯ä»¥è®¿é—®åˆ°çŠ¶æ€storeå®ä¾‹ï¼Œè€Œå®˜æ–¹æ•™ç¨‹ä¸Šå¹¶æ²¡æœ‰ç‰¹åˆ«å¼ºè°ƒè¿™ä¸€ç‚¹ï¼Œåœ¨ä¸‹é¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªæœ‰è¶£çš„äº‹æƒ…
### stores/index-store.js
```javascript
import Vuex from 'vuex';
import Vue from 'vue';
import axios from 'axios';

Vue.use(Vuex); //åœ¨vueä¸­åŠ å…¥Vuexæ’ä»¶
const Store = new Vuex.Store({ //å®ä¾‹åŒ–ä¸€ä¸ªStore
	state : {   //è¿™é‡Œæ˜¯æˆ‘ä»¬éœ€è¦é›†ä¸­ç®¡ç†çš„ç™»é™†çŠ¶æ€
		account : "ads",
		password : "123456",
		islogin : null
	},
	mutations : {   // è¿™æ˜¯å”¯ä¸€å¯ä»¥å˜æ›´stateçš„é€”å¾„ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªæäº¤
		updateAccount(state,payload){  //å…·æœ‰è½½è·çš„mutation
			state.account = payload.account
		},
		updatePassword(state,payload){
			state.password = payload.password
		},
		islogin(state,payload){
			if(payload == 1){
				state.islogin = true
			}else if(payload == 0){
				state.islogin = false
			}
		}
	},
	actions : {   //è¿™æ˜¯å¯ä»¥æ”¯æŒå¼‚æ­¥æ‰§è¡Œæäº¤çš„actions
		login (context,payload){
			//è¿™é‡Œæ˜¯å»è®¿é—®æˆ‘ä»¬çš„åå‘ä»£ç†æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªphpæ–‡ä»¶
			axios.get('/index.php',{
					params : {
						account : payload.account,
						password : payload.password
					}
				}).then(function(response){
					if(response.data.code == 'success'){
						//å˜æ›´storeçŠ¶æ€
						context.commit('islogin',1) //è¿™é‡Œåšäº†åœ¨å¼‚æ­¥é€»è¾‘ä¸­çš„çŠ¶æ€æäº¤
					}else{
						context.commit('islogin',0)
					}
				}).catch(function(error){
					console.log(error)
					alert('fail')
				})
		}
	}
})

export default Store
```
æˆ‘ä»¬è¿™é‡Œçš„Storeæœ‰ä¸‰ä¸ªå±æ€§ï¼Œ`state`æ˜¯æˆ‘ä»¬éœ€è¦é›†ä¸­ç®¡ç†çš„çŠ¶æ€æˆ–è€…æ•°æ®ï¼Œ `mutations`æ˜¯ç»´æŠ¤å˜æ›´æˆ‘ä»¬çŠ¶æ€çš„ä¸€ä¸ªæ–¹å¼ï¼Œ `actions`æ˜¯ä¸ºäº†åœ¨å¼‚æ­¥é€»è¾‘ä¸­æäº¤çŠ¶æ€çš„ä¸€ä¸ªä¸­è½¬ç«™ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š
> åœ¨å®ä¾‹åŒ–Storeä¹‹å‰ï¼Œå¿…é¡»å…ˆ Vue.use(Vuex) ï¼Œå…ˆåœ¨vueä¸­åŠ å…¥Vuexæ’ä»¶

è¿™é‡Œéœ€è¦è¯´ä¸€ä¸‹çš„æ˜¯ï¼Œå¦‚ä½•å¼€å¯dev-serverçš„proxyï¼Œè®©nginxæ¥ä»£ç†axiosçš„è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è·¨åŸŸè®¿é—®äº†(å› ä¸ºdev-serverè·‘çš„æ˜¯8080ç«¯å£ï¼Œnginxè·‘çš„æ˜¯80ç«¯å£ï¼Œä¸è®¾ç½®ä»£ç†çš„è¯æµè§ˆå™¨å°†æ‹’ç»è·¨åŸŸè®¿é—®)ï¼Œæ„Ÿè§‰å¾ˆæ·±å¥¥ï¼Œå…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹webpack.config.jsä¸­devServerçš„é…ç½® ï¼š 

webpack.config.js
```javascript
	devServer : {
		contentBase : './dist',
		watchContentBase : true,
		compress : true,
		port : 8080,
		hot : true,
		inline : true, //å¼€å¯é¡µé¢è‡ªåŠ¨åˆ·æ–°
		open : true,
		proxy : {
			'/index.php' : {
				target : 'http://localhost:80/phpinfo.php',
				secure : false
			}
		}
	}
```
ç„¶åï¼Œæˆ‘ä»¬çš„axiosåœ¨é…ç½®urlæ—¶ä½¿ç”¨ `/index.php`ï¼Œå°±å¯ä»¥ç›¸å½“äºè®¿é—®`http://localhost:80/phpinfo.php`
### routers/index-router.js
```javascript
import VueRouter from 'vue-router';
import Vue from 'vue';
import success from '../components/success.vue';

// ç»„ä»¶æ³¨å†Œè·¯ç”±ï¼Œè¿™é‡Œsuccessç»„ä»¶æ³¨å†Œè·¯ç”±æ˜¯'/app'
var routes = [
	{
		path : '/app',component : success
	}
]
Vue.use(VueRouter);   //åœ¨vueä¸­åŠ å…¥VueRouteræ’ä»¶
var Router = new VueRouter({   //å®ä¾‹åŒ–ä¸€ä¸ªrouter
	routes   //è¿™é‡Œçš„å†™æ³•ç›¸å½“äº routes:routes
})


export default Router;
```
è¿™é‡Œçš„è·¯ç”±åªæ³¨å†Œäº†ä¸€ä¸ªç»„ä»¶ï¼Œvue-routerçš„èƒ½åŠ›è¿œä¸æ­¢å¦‚æ­¤ï¼Œè¿˜å¯ä»¥åµŒå¥—å®šä¹‰ç»„ä»¶çš„å±‚çº§å…³ç³»ï¼Œæ›´å¤šåˆ°å®˜æ–¹æ–‡æ¡£äº†è§£ ï¼Œè·¯ç”±å™¨å’ŒçŠ¶æ€ç®¡ç†å™¨ä¸€æ ·éƒ½æ˜¯vueå®˜æ–¹æ ¸å¿ƒæ’ä»¶ï¼Œä½¿ç”¨å‰éƒ½éœ€è¦å…ˆ `Vue.use(VueRouter)` ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡ŒæŠŠè·¯ç”±å’ŒçŠ¶æ€åˆ†åˆ«ä»vueå®ä¾‹ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬ç®¡ç†ï¼Œé€šè¿‡æš´éœ²å®ä¾‹`Store` `Router`ï¼ŒåŠ å…¥åˆ°vueå®ä¾‹ä¸­å»ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿debugå’ŒåæœŸç»´æŠ¤

### components/App.vue   å’Œ  components/success.vue

App.vue
```html
<template>
	<div>
		<input type="text" v-model="account">
		<input type="password" v-model="password">
		<button type="button" @click="login">show</button>
	</div>
</template>
<script>
 	export default {
 		data : function(){
 			return {
 				account : "",
 				password : ""
 			}
 		},
 		created : function(){
 			this.account = this.$store.state.account
 			this.password = this.$store.state.password
 		},
 		watch : {  //ä¾¦å¬å±æ€§
 			account : function(){ //å½“accoutæ”¹å˜å°±ç«‹å³æäº¤çŠ¶æ€
 				this.$store.commit('updateAccount',{
 					account : this.account
 				})
 			},
 			// å½“passwordæ”¹å˜å°±ç«‹å³æäº¤çŠ¶æ€
 			password : function(){
 				this.$store.commit('updatePassword',{
 					password : this.password
 				})
 			}
 		},
		methods : {
			login : function(){ //é€šè¿‡åˆ†å‘åˆ°actionï¼Œæ¥å¼‚æ­¥è¯·æ±‚ç™»å½•æœåŠ¡ï¼Œå¹¶å˜æ›´çŠ¶æ€
				this.$store.dispatch('login',{
					account : this.account,
					password : this.password
				})
				this.$router.push('/app');//åŒæ—¶æ˜¾ç¤ºç™»é™†çŠ¶æ€
			}
		}
 	}
</script>
<style scoped>
	input {
		height:  40px;
		width:   300px;
		border: 1px solid blue;
		box-shadow: none;
	}
</style>
```
success.vue
```html
<template>
	<div>
		<p>{{islogin}}</p>
	</div>
</template>
<script>
 	export default {
 		computed : { //è®¡ç®—å±æ€§
 			//åŠ¨æ€å“åº”çŠ¶æ€çš„å˜æ›´
 			islogin : function(){
 				var islogin = this.$store.state.islogin
 				if(islogin == null){
 					return 'No option'
 				}else if(islogin == true){
 					return 'Login Success'
 				}else if(islogin == false){
 					return 'Login Fail'
 				}
 			}
 		}
 	}
</script>
<style scoped>
	p {
		height:  40px;
		text-align: center;
	}
</style>
```
### templates/index.html
```html
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>index</title>
</head>
<body>
	<div id="app">
	   <!-- Appç»„ä»¶æ¸²æŸ“å‡ºå£ -->
		<App></App>
		<!-- æ³¨å†Œè·¯ç”±çš„ç»„ä»¶æ¸²æŸ“å‡ºå£ -->
		<router-view></router-view>
	</div>
</body>
</html>
```
### æ€»ç»“
å¥½äº†ï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œä»£ç åŸºæœ¬å®Œæˆï¼Œæˆ‘ä»¬æ¥ç†ä¸€ç†ï¼Œvue+vuex+vue-routerä»¥åŠç»„ä»¶ä¹‹é—´æ˜¯å¦‚ä½•é…åˆå·¥ä½œçš„ï¼Ÿ

ç”¨æˆ·åœ¨`App.vue`ç»„ä»¶ä¸­è¾“å…¥ï¼Œ`v-model`åŒå‘ç»‘å®šäº†`App`ç»„ä»¶ä¸­çš„`data`ï¼ŒAppç»„ä»¶ä¸­çš„ä¾¦å¬å±æ€§å‘ç°dataæ”¹åŠ¨ï¼Œç«‹å³å‘`vuex`çš„`Store`å®ä¾‹æäº¤äº†çŠ¶æ€å˜æ›´ï¼Œå½“ç”¨æˆ·ç‚¹å‡»`show`ï¼ŒAppç»„ä»¶ä¸­`methods.login`äº‹ä»¶è¢«è§¦å‘ï¼Œå®ƒå‘Storeå®ä¾‹å‘èµ·ä¸€ä¸ªåˆ†å‘ï¼Œå¹¶å¯¼èˆªåˆ°`/app`ï¼Œ`Store`çš„`action`æ”¶åˆ°åˆ†å‘è°ƒç”¨`axios`å»å¼‚æ­¥è¯·æ±‚ä½äº`localhost:80`ä¸‹çš„`php`åå°æœåŠ¡ï¼Œå¾—åˆ°çš„ç™»é™†çŠ¶æ€ç«‹å³æäº¤ï¼Œä¸æ­¤åŒæ—¶ï¼Œ`Router`å»æ¸²æŸ“`/app`è·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ°æ¨¡æ¿ä¸­å»ï¼Œäºæ˜¯æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåŠ¨æ€å“åº”å¼çš„çŠ¶æ€æç¤ºäº†